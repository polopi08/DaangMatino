<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DaangMatino - Road Maintenance Planning System</title>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/test.css">
</head>
<body>
    <header class="header-sticky"> 
        <a href="landingPage.html" class="logo">
            <img src="../assets/logowDAA.png" alt="Company Logo">
            DaangMatino 
        <!-- </a>        <ul class="navbar">
            <li><a href="#home" class="active">Home</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#about">About Us</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="maps.html">Maps</a></li> -->
        </ul>
        <div class="nav-actions">
            <div class="reportButton">
                <a href="landingPage.html"><button>Back to Home</button></a> 
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <div class="container">

        <div class="tabs">
            <div class="tab active" onclick="switchTab('report')">
                üìã Report Defects
            </div>
            <div class="tab" onclick="switchTab('analysis')">
                üî¨ Analysis & Prioritization
            </div>
            <div class="tab" onclick="switchTab('routes')">
                üó∫Ô∏è Maintenance Visualization
            </div>
        </div>

        <!-- Report Tab -->
        <div id="report-tab" class="tab-content active">
            <div class="report-form">
                <h3>üö® Report Road Defect</h3>
                <div class="form-grid">
                    <div class="input-group">
                        <label for="roadName">Road Name/Location</label>
                        <input
                            type="text"
                            id="roadName"
                            placeholder="Select nodes on map"
                            readonly
                        />
                    </div>
                    <div class="input-group">
                        <label for="detectedRoadType">Detected Road Type</label>
                        <input
                            type="text"
                            id="detectedRoadType"
                            placeholder="Will be detected from OSM"
                            readonly
                        />
                    </div>
                    <div class="input-group">
                        <label for="severity">Severity Level</label>
                        <select id="severity">
                            <option value="critical">Critical (Immediate danger)</option>
                            <option value="high">High (Major disruption)</option>
                            <option value="medium">Medium (Moderate impact)</option>
                            <option value="low">Low (Minor issue)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="responseTime">Estimated Response Time (days)</label>
                        <input
                            type="number"
                            id="responseTime"
                            min="1"
                            value="0"
                            readonly
                        />
                    </div>
                </div>

                <div class="input-group" style="grid-column: 1 / -1">
                    <label>Defect Types (Select all that apply)</label>
                    <div class="defects-container" id="defectsContainer">
                        <!-- Defect checkboxes will be generated here -->
                    </div>
                </div>

                <!-- Map Container -->
                <div id="mapContainer">
                    <div class="map-overlay">
                        <h4>OSM Road Selection</h4>
                        <div id="selectionInfo" class="selection-info">
                            Click "Select Nodes" to start
                        </div>
                        <div class="map-controls">
                            <button
                                id="pointBtn"
                                class="map-control-btn active"
                                onclick="setMode('node')"
                            >
                                üìç Select Nodes
                            </button>
                            <button
                                class="map-control-btn btn-danger"
                                onclick="clearSelection()"
                            >
                                ‚ùå Clear Selection
                            </button>
                        </div>
                        <p style="margin-top: 10px; font-size: 0.9em">
                            <span class="node-marker"></span> = Node
                            <span class="route-line"></span> = Road Segment
                        </p>
                    </div>
                    <div id="map"></div>
                </div>

                <div class="input-group" style="margin-top: 20px">
                    <label for="description">Additional Description</label>
                    <textarea
                        id="description"
                        placeholder="Describe the road condition, location landmarks, and any additional details..."
                    ></textarea>
                </div>
                <button
                    class="btn-primary"
                    onclick="submitReport()"
                    style="margin-top: 20px"
                >
                    Submit Report
                </button>
            </div>

            <div class="reports-table">
                <h3
                    style="
                        padding: 20px;
                        margin: 0;
                        background: #f8f9fa;
                        border-bottom: 1px solid #e0e6ed;
                    "
                >
                    üìä Community Reports
                </h3>
                <table>
                    <thead>
                        <tr>
                            <th>Road Name</th>
                            <th>Type</th>
                            <th>Defects</th>
                            <th>Severity</th>
                            <th>Response Time</th>
                            <th>Reports Count</th>
                            <th>Severity Score</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="reportsBody">
                        <tr>
                            <td colspan="8" class="empty-state">
                                No reports submitted yet. Be the first to report a road
                                defect!
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Analysis Tab -->
        <div id="analysis-tab" class="tab-content">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="totalReports">0</div>
                    <div class="stat-label">Total Reports</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="criticalIssues">0</div>
                    <div class="stat-label">Critical Issues</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="avgResponseTime">0</div>
                    <div class="stat-label">Avg Response Time (days)</div>
                </div>
                <!-- <div class="stat-item">
                    <div class="stat-number" id="budgetUtilization">0%</div>
                    <div class="stat-label">Budget Utilization</div>
                </div> -->
            </div>

            <div style="margin: 30px 0">
                <label
                    for="maintenanceBudget"
                    style="display: block; margin-bottom: 10px; font-weight: 600"
                    >Available Maintenance Time (days):</label
                >
                <input
                    type="number"
                    id="maintenanceBudget"
                    value="180"
                    min="1"
                    style="width: 200px; margin-right: 20px"
                />
                <button class="btn-success" onclick="runOptimization()">
                    üöÄ Run DaangMatino Analysis
                </button>
            </div>

            <div
                class="algorithm-results"
                id="algorithmResults"
                style="display: none"
            >
                <!-- Knapsack Results -->
                <div class="result-panel knapsack-panel">
                    <h3>üéí Knapsack Optimization</h3>
                    <p>
                        <strong>Purpose:</strong> Select optimal subset of roads that can
                        be fixed within available time budget
                    </p>
                    <div id="knapsackResults"></div>
                </div>

                <!-- QuickSort Results -->
                <div class="result-panel quicksort-panel">
                    <h3>‚ö° QuickSort Prioritization</h3>
                    <p>
                        <strong>Purpose:</strong> Sort selected roads by priority
                        considering severity, traffic, and community impact
                    </p>
                    <div id="quicksortResults"></div>
                </div>

                <!-- Dijkstra Results -->
                <div class="result-panel dijkstra-panel">
                    <h3>üó∫Ô∏è Dijkstra Route Planning</h3>
                    <p>
                        <strong>Purpose:</strong> Find optimal alternative routes during
                        maintenance periods
                    </p>
                    <div id="dijkstraResults"></div>
                </div>
            </div>

            <!-- Maintenance Schedule -->
            <div id="maintenanceSchedule" class="empty-state">
                Run the DaangMatino analysis first to generate maintenance schedules.
            </div>
        </div>

        <!-- Routes Tab - Replaced with Visualization -->
        <div id="routes-tab" class="tab-content">
            <div class="visualization-container">
                <div class="visualization-header">
                    <h1><i class="fas fa-road"></i> Road Network Maintenance</h1>
                    <p class="subtitle">
                        Visualize road availability during maintenance period
                    </p>
                </div>

                <div class="visualization-content">
                    <div class="dashboard">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Road Network Visualization</h2>
                                <div class="card-icon">
                                    <i class="fas fa-map"></i>
                                </div>
                            </div>
                            <div id="network-map"></div>

                            <div class="slider-container">
                                <div class="slider-header">
                                    <h3>Adjust Maintenance Day</h3>
                                    <div class="day-display">
                                        Day <span id="current-day">15</span> of 30
                                    </div>
                                </div>
                                <input
                                    type="range"
                                    min="1"
                                    max="30"
                                    value="15"
                                    class="slider"
                                    id="day-slider"
                                />
                                <div class="legend">
                                    <div class="legend-item">
                                        <div
                                            class="legend-color"
                                            style="background-color: #2ed573"
                                        ></div>
                                        <span>Available</span>
                                    </div>
                                    <div class="legend-item">
                                        <div
                                            class="legend-color"
                                            style="background-color: #ffa502"
                                        ></div>
                                        <span>In Maintenance</span>
                                    </div>
                                    <div class="legend-item">
                                        <div
                                            class="legend-color"
                                            style="background-color: #ff4757"
                                        ></div>
                                        <span>Not Accessible</span>
                                    </div>
                                </div>
                            </div>

                            <div class="road-stats">
                                <div class="stat-card">
                                    <div>
                                        <i
                                            class="fas fa-road"
                                            style="color: #2ed573; font-size: 1.8rem"
                                        ></i>
                                    </div>
                                    <div class="stat-value" id="available-roads">18</div>
                                    <div class="stat-label">Available Roads</div>
                                </div>
                                <div class="stat-card">
                                    <div>
                                        <i
                                            class="fas fa-tools"
                                            style="color: #ffa502; font-size: 1.8rem"
                                        ></i>
                                    </div>
                                    <div class="stat-value" id="maintenance-roads">5</div>
                                    <div class="stat-label">In Maintenance</div>
                                </div>
                                <div class="stat-card">
                                    <div>
                                        <i
                                            class="fas fa-exclamation-triangle"
                                            style="color: #ff4757; font-size: 1.8rem"
                                        ></i>
                                    </div>
                                    <div class="stat-value" id="blocked-roads">7</div>
                                    <div class="stat-label">Blocked Roads</div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Road Maintenance Schedule</h2>
                                <div class="card-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                            </div>
                            <div class="road-list" id="visualization-road-list">
                                <div class="road-item-vis">
                                    <div>
                                        <span class="road-status status-completed"></span>
                                        <span class="road-name">National Highway 1</span>
                                    </div>
                                    <div class="road-days">Days 1-7</div>
                                </div>
                                <div class="road-item-vis">
                                    <div>
                                        <span class="road-status status-completed"></span>
                                        <span class="road-name">Municipal Road B</span>
                                    </div>
                                    <div class="road-days">Days 3-10</div>
                                </div>
                                <div class="road-item-vis">
                                    <div>
                                        <span class="road-status status-completed"></span>
                                        <span class="road-name">Bypass Road East</span>
                                    </div>
                                    <div class="road-days">Days 5-12</div>
                                </div>
                                <div class="road-item-vis">
                                    <div>
                                        <span class="road-status status-active"></span>
                                        <span class="road-name">Barangay Access Road</span>
                                    </div>
                                    <div class="road-days">Days 10-18</div>
                                </div>
                                <div class="road-item-vis">
                                    <div>
                                        <span class="road-status status-active"></span>
                                        <span class="road-name">National Highway 2</span>
                                    </div>
                                    <div class="road-days">Days 12-20</div>
                                </div>
                                <div class="road-item-vis">
                                    <div>
                                        <span class="road-status status-pending"></span>
                                        <span class="road-name">Municipal Road C</span>
                                    </div>
                                    <div class="road-days">Days 18-25</div>
                                </div>
                                <div class="road-item-vis">
                                    <div>
                                        <span class="road-status status-pending"></span>
                                        <span class="road-name">Barangay Service Road</span>
                                    </div>
                                    <div class="road-days">Days 20-27</div>
                                </div>
                                <div class="road-item-vis">
                                    <div>
                                        <span class="road-status status-pending"></span>
                                        <span class="road-name">Bypass Road West</span>
                                    </div>
                                    <div class="road-days">Days 22-30</div>
                                </div>
                            </div>

                            <div class="card-header" style="margin-top: 20px">
                                <h2 class="card-title">Maintenance Summary</h2>
                            </div>
                            <div class="road-stats">
                                <div class="stat-card">
                                    <div>
                                        <i
                                            class="fas fa-check-circle"
                                            style="color: #2ed573; font-size: 1.8rem"
                                        ></i>
                                    </div>
                                    <div class="stat-value">3</div>
                                    <div class="stat-label">Completed</div>
                                </div>
                                <div class="stat-card">
                                    <div>
                                        <i
                                            class="fas fa-tools"
                                            style="color: #ffa502; font-size: 1.8rem"
                                        ></i>
                                    </div>
                                    <div class="stat-value">2</div>
                                    <div class="stat-label">In Progress</div>
                                </div>
                                <div class="stat-card">
                                    <div>
                                        <i
                                            class="fas fa-clock"
                                            style="color: #3498db; font-size: 1.8rem"
                                        ></i>
                                    </div>
                                    <div class="stat-value">3</div>
                                    <div class="stat-label">Upcoming</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="timeline">
                        <div class="timeline-header">
                            <h2 class="timeline-title">Maintenance Timeline</h2>
                            <div class="day-display">
                                Day <span id="timeline-day">15</span> of 30
                            </div>
                        </div>
                        <div class="timeline-steps">
                            <div class="timeline-step">
                                <div class="step-day">Day 1-7</div>
                                <div class="step-road">National Highway 1</div>
                                <div class="step-status status-complete">Completed</div>
                            </div>
                            <div class="timeline-step">
                                <div class="step-day">Day 3-10</div>
                                <div class="step-road">Municipal Road B</div>
                                <div class="step-status status-complete">Completed</div>
                            </div>
                            <div class="timeline-step">
                                <div class="step-day">Day 5-12</div>
                                <div class="step-road">Bypass Road East</div>
                                <div class="step-status status-complete">Completed</div>
                            </div>
                            <div class="timeline-step">
                                <div class="step-day">Day 10-18</div>
                                <div class="step-road">Barangay Access Road</div>
                                <div class="step-status status-in-progress">In Progress</div>
                            </div>
                            <div class="timeline-step">
                                <div class="step-day">Day 12-20</div>
                                <div class="step-road">National Highway 2</div>
                                <div class="step-status status-in-progress">In Progress</div>
                            </div>
                            <div class="timeline-step">
                                <div class="step-day">Day 18-25</div>
                                <div class="step-road">Municipal Road C</div>
                                <div class="step-status status-planned">Planned</div>
                            </div>
                            <div class="timeline-step">
                                <div class="step-day">Day 20-27</div>
                                <div class="step-road">Barangay Service Road</div>
                                <div class="step-status status-planned">Planned</div>
                            </div>
                            <div class="timeline-step">
                                <div class="step-day">Day 22-30</div>
                                <div class="step-road">Bypass Road West</div>
                                <div class="step-status status-planned">Planned</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="visualization-footer">
                    <p>Road Maintenance Visualization System | ¬© 2023 DaangMatino</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="../jscript/test.js"></script>
</body>
</html>