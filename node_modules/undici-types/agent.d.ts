import { URL } from 'url'
import Pool from './pool'
import Dispatcher from './dispatcher'

export default Agent

declare class Agent extends Dispatcher {
  constructor (opts?: Agent.Options)
  
  closed: boolean
  
  destroyed: boolean
  
  dispatch (options: Agent.DispatchOptions, handler: Dispatcher.DispatchHandler): boolean
}

declare namespace Agent {
  export interface Options extends Pool.Options {
    
    factory?(origin: string | URL, opts: Object): Dispatcher;
    
    maxRedirections?: number;

    interceptors?: { Agent?: readonly Dispatcher.DispatchInterceptor[] } & Pool.Options['interceptors']
  }

  export interface DispatchOptions extends Dispatcher.DispatchOptions {
    
    maxRedirections?: number;
  }
}
